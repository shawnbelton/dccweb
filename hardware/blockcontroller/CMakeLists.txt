cmake_minimum_required(VERSION 3.2)
set(CMAKE_TOOLCHAIN_FILE /home/shawn/development/arduino-cmake/cmake/ArduinoToolchain.cmake)
set(UIPEthernet_RECURSE True)
set(ARDUINO_DEFAULT_BOARD nano328)
set(ARDUINO_DEFAULT_PORT /dev/ttyUSB0)
set(PROJECT_NAME blockController)
set(BOARD nano)
project(${PROJECT_NAME})
execute_process(COMMAND echo -ne "Block Controller" OUTPUT_VARIABLE APP_NAME)
message(${APP_NAME})
add_definitions(-DAPP_NAME="${APP_NAME}")
add_definitions(-DARDUINO_ARCH_AVR=ARDUINO_ARCH_AVR)
set(${CMAKE_PROJECT_NAME}-nano_PORT /dev/ttyUSB0)
set(${CMAKE_PROJECT_NAME}-nano_SERIAL minicom -D @SERIAL_PORT@ -b 9600)
set(${CMAKE_PROJECT_NAME}-uno_PORT /dev/ttyACM0)
set(${CMAKE_PROJECT_NAME}-uno_SERIAL minicom -D @SERIAL_PORT@ -b 9600)

set(${CMAKE_PROJECT_NAME}-nano_SKETCH blockController.ino)
set(${CMAKE_PROJECT_NAME}-uno_SKETCH blockController.ino)
generate_arduino_firmware(${CMAKE_PROJECT_NAME}-nano BOARD nano328 PORT /dev/ttyUSB0)
generate_arduino_firmware(${CMAKE_PROJECT_NAME}-uno BOARD uno PORT /dev/ttyACM0)

TARGET_COMPILE_DEFINITIONS(${CMAKE_PROJECT_NAME}-uno PUBLIC -DWITH_LEDS=1 -DWITH_SD=1)

if(NOT DEFINED CMAKE_SUPPRESS_DEVELOPER_WARNINGS)
    set(CMAKE_SUPPRESS_DEVELOPER_WARNINGS 1 CACHE INTERNAL "No dev warnings")
endif()
